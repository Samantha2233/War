const cardsArr = [
    {
      name: 'King of Hearts',
      suit: 'heart',
      value: 13,
      img: 'images/hearts/hearts-K.svg',
      id: null
    },
    {
      name: 'Queen of Hearts',
      suit: 'heart',
      value: 12,
      img: 'images/hearts/hearts-Q.svg',
      id: null
    },
    {
      name: 'Jack of Hearts',
      suit: 'heart',
      value: 11,
      img: 'images/hearts/hearts-J.svg',
      id: null
    },
    {
      name: 'Ten of Hearts',
      suit: 'heart',
      value: 10,
      img: 'images/hearts/hearts-r10.svg',
      id: null
    },
    {
      name: 'Nine of Hearts',
      suit: 'heart',
      value: 9,
      img: 'images/hearts/hearts-r09.svg',
      id: null
    },
    {
      name: 'Eight of Hearts',
      suit: 'heart',
      value: 8,
      img: 'images/hearts/hearts-r08.svg',
      id: null
    },
    {
      name: 'Seven of Hearts',
      suit: 'heart',
      value: 7,
      img: 'images/hearts/hearts-r07.svg',
      id: null
    },
    {
      name: 'Six of Hearts',
      suit: 'heart',
      value: 6,
      img: 'images/hearts/hearts-r06.svg',
      id: null
    },
    {
      name: 'Five of Hearts',
      suit: 'heart',
      value: 5,
      img: 'images/hearts/hearts-r05.svg',
      id: null
    },
    {
      name: 'Four of Hearts',
      suit: 'heart',
      value: 4,
      img: 'images/hearts/hearts-r04.svg',
      id: null
    },
    {
      name: 'Three of Hearts',
      suit: 'heart',
      value: 3,
      img: 'images/hearts/hearts-r03.svg',
      id: null
    },
    {
      name: 'Two of Hearts',
      suit: 'heart',
      value: 2,
      img: 'images/hearts/hearts-r02.svg',
      id: null
    },
    {
      name: 'Ace of Hearts',
      suit: 'heart',
      value: 14,
      img: 'images/hearts/hearts-A.svg',
      id: null
    },
    {
      name: 'King of Clubs',
      suit: 'club',
      value: 13,
      img: 'images/clubs/clubs-K.svg',
      id: null
    },
    {
      name: 'Queen of Clubs',
      suit: 'club',
      value: 12,
      img: 'images/clubs/clubs-Q.svg',
      id: null
    },
    {
      name: 'Jack of Clubs',
      suit: 'club',
      value: 11,
      img: 'images/clubs/clubs-J.svg',
      id: null
    },
    {
      name: 'Ten of Clubs',
      suit: 'club',
      value: 10,
      img: 'images/clubs/clubs-r10.svg',
      id: null
    },
    {
      name: 'Nine of Clubs',
      suit: 'club',
      value: 9,
      img: 'images/clubs/clubs-r09.svg',
      id: null
    },
    {
      name: 'Eight of Clubs',
      suit: 'club',
      value: 8,
      img: 'images/clubs/clubs-r08.svg',
      id: null
    },
    {
      name: 'Seven of Clubs',
      suit: 'club',
      value: 7,
      img: 'images/clubs/clubs-r07.svg',
      id: null
    },
    {
      name: 'Six of Clubs',
      suit: 'club',
      value: 6,
      img: 'images/clubs/clubs-r06.svg',
      id: null
    },
    {
      name: 'Five of Clubs',
      suit: 'club',
      value: 5,
      img: 'images/clubs/clubs-r05.svg',
      id: null
    },
    {
      name: 'Four of Clubs',
      suit: 'club',
      value: 4,
      img: 'images/clubs/clubs-r04.svg',
      id: null
    },
    {
      name: 'Three of Clubs',
      suit: 'club',
      value: 3,
      img: 'images/clubs/clubs-r03.svg',
      id: null
    },
    {
      name: 'Two of Clubs',
      suit: 'club',
      value: 2,
      img: 'images/clubs/clubs-r02.svg',
      id: null
    },
    {
      name: 'Ace of Clubs',
      suit: 'club',
      value: 14,
      img: 'images/clubs/clubs-A.svg',
      id: null
    },
    {
      name: 'King of Diamonds',
      suit: 'diamond',
      value: 13,
      img: 'images/diamonds/diamonds-K.svg',
      id: null
    },
    {
      name: 'Queen of Diamonds',
      suit: 'diamond',
      value: 12,
      img: 'images/diamonds/diamonds-Q.svg',
      id: null
    },
    {
      name: 'Jack of Diamonds',
      suit: 'diamond',
      value: 11,
      img: 'images/diamonds/diamonds-J.svg',
      id: null
    },
    {
      name: 'Ten of Diamonds',
      suit: 'diamond',
      value: 10,
      img: 'images/diamonds/diamonds-r10.svg',
      id: null
    },
    {
      name: 'Nine of Diamonds',
      suit: 'diamond',
      value: 9,
      img: 'images/diamonds/diamonds-r09.svg',
      id: null
    },
    {
      name: 'Eight of Diamonds',
      suit: 'diamond',
      value: 8,
      img: 'images/diamonds/diamonds-r08.svg',
      id: null
    },
    {
      name: 'Seven of Diamonds',
      suit: 'diamond',
      value: 7,
      img: 'images/diamonds/diamonds-r07.svg',
      id: null
    },
    {
      name: 'Six of Diamonds',
      suit: 'diamond',
      value: 6,
      img: 'images/diamonds/diamonds-r06.svg',
      id: null
    },
    {
      name: 'Five of Diamonds',
      suit: 'diamond',
      value: 5,
      img: 'images/diamonds/diamonds-r05.svg',
      id: null
    },
    {
      name: 'Four of Diamonds',
      suit: 'diamond',
      value: 4,
      img: 'images/diamonds/diamonds-r04.svg',
      id: null
    },
    {
      name: 'Three of Diamonds',
      suit: 'diamond',
      value: 3,
      img: 'images/diamonds/diamonds-r03.svg',
      id: null
    },
    {
      name: 'Two of Diamonds',
      suit: 'diamond',
      value: 2,
      img: 'images/diamonds/diamonds-r02.svg',
      id: null
    },
    {
      name: 'Ace of Diamonds',
      suit: 'diamond',
      value: 14,
      img: 'images/diamonds/diamonds-A.svg',
      id: null
    },
    {
      name: 'King of Spades',
      suit: 'spade',
      value: 13,
      img: 'images/spades/spades-K.svg',
      id: null
  
    },
    {
      name: 'Queen of Spades',
      suit: 'spade',
      value: 12,
      img: 'images/spades/spades-Q.svg',
      id: null
    },
    {
      name: 'Jack of Spades',
      suit: 'spade',
      value: 11,
      img: 'images/spades/spades-J.svg',
      id: null
    },
    {
      name: 'Ten of Spades',
      suit: 'spade',
      value: 10,
      img: 'images/spades/spades-r10.svg',
      id: null
    },
    {
      name: 'Nine of Spades',
      suit: 'spade',
      value: 9,
      img: 'images/spades/spades-r09.svg',
      id: null
    },
    {
      name: 'Eight of Spades',
      suit: 'spade',
      value: 8,
      img: 'images/spades/spades-r08.svg',
      id: null
    },
    {
      name: 'Seven of Spades',
      suit: 'spade',
      value: 7,
      img: 'images/spades/spades-r07.svg',
      id: null
    },
    {
      name: 'Six of Spades',
      suit: 'spade',
      value: 6,
      img: 'images/spades/spades-r06.svg',
      id: null
    },
    {
      name: 'Five of Spades',
      suit: 'spade',
      value: 5,
      img: 'images/spades/spades-r05.svg',
      id: null
    },
    {
      name: 'Four of Spades',
      suit: 'spade',
      value: 4,
      img: 'images/spades/spades-r04.svg',
      id: null
    },
    {
      name: 'Three of Spades',
      suit: 'spade',
      value: 3,
      img: 'images/spades/spades-r03.svg',
      id: null
    },
    {
      name: 'Two of Spades',
      suit: 'spade',
      value: 2,
      img: 'images/spades/spades-r02.svg',
      id: null
    },
    {
      name: 'Ace of Spades',
      suit: 'spade',
      value: 14,
      img: 'images/spades/spades-A.svg',
      id: null
    }
  ]

////////////////    V A R I A B L E S   //////////////


// Collected Cards
const cCollection = document.getElementById('cCollection');
const pCollection = document.getElementById('pCollection');
const cCollectionArr = [];
const pCollectionArr = [];


// Decks
let cDeck = document.getElementById('cDeck');
let pDeck = document.getElementById('pDeck');
const cDeckArr = [];
const pDeckArr = [];


// Space where card are drawn and placed
let cSpace = document.getElementById('cSpace');
let pSpace = document.getElementById('pSpace');

// War Zones
let cWarZone = document.getElementById('c-war-zone');
let pWarZone = document.getElementById('p-war-zone');
let warZoneArr =[];

// Card on Table
let cCard = null;
let pCard = null;

// To Calculate Score
let cScoreCalc = 0;
let pScoreCalc = 0;


let cScore = document.getElementById('cScore');
let pScore = document.getElementById('pScore');

let warning = document.getElementById('warning');

let winner = null;






///////////     I N I T     /////////////

init();
function init() {
    //shuffle cards
    cardsArr.sort(() => 0.5 - Math.random());
    //deal cards
    cardsArr.forEach(function(card, idx) {
        if(idx % 2 === 0) {
            cDeckArr.push(card);
        } else {
            pDeckArr.push(card);
        }
    })
    setScore();
}




////////////////   D E A L    T O P   C A R D ( )   //////////////

//click to deal top of each player's deck
pDeck.addEventListener('click', dealTopCard);

function dealTopCard() {
    //If deck is empty, push collections back into deck
    if (cDeckArr === 0) {
        console.log('cDeckArr is Emty')
        cDeckArr.push(...cCollectionArr);
        cCollectionArr = [];
        cCollection.backgroundImage = "";
    }
    if(pDeckArr === 0) {
        pDeckArr.push(...pCollectionArr);
        pCollectionArr = [];
        pCollection.backgroundImage = "";
        console.log('pDeckArr is Emty')
    }
    cCard = cDeckArr.pop();
    pCard = pDeckArr.pop();
    cSpace.style.backgroundImage = `url(${cCard.img})`;
    pSpace.style.backgroundImage = `url(${pCard.img})`;
    compareCards();
}




////////////////  C O M P A R E   C A R D S  ( )   //////////////// 

function compareCards() {
    if(cCard.value > pCard.value) {
        //show that computer won this round
        setTimeout(expandWinningCard, 300);
            function expandWinningCard() {
                cSpace.classList.add('expand');
        }
        setTimeout(contractWinningCard, 700);
            function contractWinningCard() {
                cSpace.classList.remove('expand');
        }
        
        //push cards into cCollectionArr
        cCollectionArr.push(cCard, pCard);
// ---------------------------------------------------------------
        if(warZoneArr.length > 0) {
            // alert('computer wins!');
            cCollectionArr.push(...warZoneArr);
            setTimeout(hideWarZone, 2000);
            
            console.log(warZoneArr);
            console.log(cCollectionArr);

            setTimeout(expandWinningCard, 300);
                function expandWinningCard() {
                cWarZone.lastChild.classList.add('expand');
            }
            setTimeout(contractWinningCard, 700);
            function contractWinningCard() {
                cWarZone.lastChild.remove('expand');
            }
            warZoneArr = [];
        }
// ---------------------------------------------------------------
        console.log('cDeckArr', cDeckArr);
        console.log('cCollectionArr', cCollectionArr);
        



//////////////////   A W A R D   C A R D S ( )   ///////////////////////
        // setTimeout(awardCards(), 1000);

        function awardCards() {
            cCollection.style.backgroundImage = `url(${cCard.img})`;
            cCollection.style.backgroundImage = `url(${pCard.img})`;
        }
        setTimeout(clearSpaces, 1000);
// ---------------------------------------------------------------

    } else if (cCard.value < pCard.value) {
        //show that computer won this round
        setTimeout(expandWinningCard, 300);
        function expandWinningCard() {
            pSpace.classList.add('expand');
        }
        setTimeout(contractWinningCard, 700);
        function contractWinningCard() {
            pSpace.classList.remove('expand');
        }
        //push cards into pCollectionArr
        pCollectionArr.push(cCard, pCard);
// ---------------------------------------------------------------
        if(warZoneArr.length > 0) {
            // alert('You win!');
            pCollectionArr.push(...warZoneArr);
            
            setTimeout(hideWarZone, 2000);
            
            console.log('warZoneArr', warZoneArr);
            console.log('cCollectionArr', cCollectionArr);

            setTimeout(expandWinningCard, 300);
                function expandWinningCard() {
                cWarZone.lastChild.classList.add('expand');
            }
            setTimeout(contractWinningCard, 700);
            function contractWinningCard() {
                cWarZone.lastChild.classList.remove('expand');
            }
            warZoneArr = [];
        }
// ---------------------------------------------------------------
        console.log('pDeckArr', pDeckArr);
        console.log('pCollectionArr', pCollectionArr);

        // setTimeout(awardCards, 1000);
        function awardCards() {
            pCollection.style.backgroundImage = `url(${pCard.img})`;
            pCollection.style.backgroundImage = `url(${cCard.img})`;
        }
        setTimeout(clearSpaces, 1000);
    } else if (cCard.value === pCard.value) {
        war();
    }
    
}

// ---------------------------------------------------------------








function hideWarZone() {
    cWarZone.innerHTML = '';
    pWarZone.innerHTML = '';
    cWarZone.style.visibility = 'hidden';
    pWarZone.style.visibility = 'hidden';
}

function clearSpaces() {
    cSpace.style.backgroundImage = '';
    pSpace.style.backgroundImage = '';
    setScore();
}

function war() {
    console.log('war!');
    cWarZone.style.visibility = 'visible';
    pWarZone.style.visibility = 'visible';

    let i = 0;
    while(i < 4) {
        i++;
        setTimeout(()=>{
            warning.classList.add('war');
            cCard = cDeckArr.pop();
            console.log('cCard popped');
            warZoneArr.push(cCard);
            console.log('warZoneArr', warZoneArr);
            let cWarSpot = document.createElement('div');
            cWarSpot.style.backgroundImage = `url(${cCard.img})`;
            cWarSpot.style.backgroundSize = 'contain';
            cWarSpot.style.backgroundRepeat = 'no-repeat';
            cWarSpot.style.backgroundColor = 'floralwhite';
            cWarSpot.style.width = '13vmin';
            cWarSpot.style.height = '18vmin';
            cWarSpot.style.display = 'inline-block';
            cWarSpot.style.marginRight = '-8vmin';
            cWarSpot.classList.add('card');
            cWarZone.appendChild(cWarSpot);

            pCard = pDeckArr.pop();
            console.log('pCard popped');
            warZoneArr.push(pCard);
            console.log('warZoneArr', warZoneArr);
            let pWarSpot = document.createElement('div');
            pWarSpot.style.backgroundImage = `url(${pCard.img})`;
            pWarSpot.style.backgroundSize = 'contain';
            pWarSpot.style.backgroundRepeat = 'no-repeat';
            pWarSpot.style.backgroundColor = 'floralwhite';
            pWarSpot.style.width = '13vmin';
            pWarSpot.style.height = '18vmin';
            pWarSpot.style.display = 'inline-block';
            pWarSpot.style.marginRight = '-8vmin';
            pWarSpot.classList.add('card');
            pWarZone.appendChild(pWarSpot);
            warning.classList.remove('war');
        }, i * 300);
        if(i = 3) {
            console.log(warZoneArr);
            setTimeout(compareCards, 1000);
        }
    }  
}

function setScore() {
    cScoreCalc = cDeckArr.length + cCollectionArr.length;
    pScoreCalc = pDeckArr.length + pCollectionArr.length;
    // let cards = " cards";
    // cards.style.fontSize = "2vmin";
    cScore.style.fontSize = '7vmin';
    cScore.style.marginTop = '0';
    cScore.style.marginBottom = '50px';
    cScore.style.paddingTop = '0';
    cScore.innerHTML = `${cScoreCalc}`;
    

    
    pScore.style.fontSize = '7vmin';
    pScore.style.marginTop = '0';
    pScore.style.marginBottom = '50px';
    pScore.style.paddingTop = '0';
    pScore.innerHTML = `${pScoreCalc}`;
}



//if player1's card is higher than player2's card
//player 1 gets the cards
//else player two get them

//if they deal the same card --> war
//deal 4 four cards
//(repeat) --> use modular code
//if player1's card is higher than player2's card
//player 1 gets the cards
//else player two get them

//when a player gets all the cards, they win
//pop up modal window celebrating win



